module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("vscode")},function(e,t,n){var o=n(0),r=n(2),i=o.window,a=o.workspace;t.activate=function(e){var t,n,u,s,c,l,g=null,f=i.activeTextEditor,p=e.workspaceState,h=a.getConfiguration("todohighlight");function d(){if(f&&f.document){for(var e,n=f.document.getText(),r={};e=s.exec(n);){var a=f.document.positionAt(e.index),g=f.document.positionAt(e.index+e[0].length),p={range:new o.Range(a,g)},d=e[0];let n=e.slice(1).indexOf(d);d=Object.keys(u)[n]||d,t||(d=d.toUpperCase()),r[d]?r[d].push(p):r[d]=[p],l.trim()&&!u[d]&&(u[d]=i.createTextEditorDecorationType(c))}Object.keys(u).forEach(e=>{var t=h.get("isEnable")&&r[e]?r[e]:[],n=u[e];f.setDecorations(n,t)})}}function m(e){var a=e.get("defaultStyle");l=e.get("keywordsPattern"),t=e.get("isCaseSensitive",!0),i.statusBarItem||(i.statusBarItem=r.createStatusBarItem()),i.outputChannel||(i.outputChannel=i.createOutputChannel("TodoHighlight")),u={},l.trim()?(c=Object.assign({},r.DEFAULT_STYLE,a,{overviewRulerLane:o.OverviewRulerLane.Right}),s=l):(n=r.getAssembledData(e.get("keywords"),a,t),Object.keys(n).forEach(e=>{t||(e=e.toUpperCase());var r=Object.assign({},{overviewRulerLane:o.OverviewRulerLane.Right},n[e]);r.overviewRulerColor||(r.overviewRulerColor=r.backgroundColor),u[e]=i.createTextEditorDecorationType(r)}),s=Object.keys(n).map(e=>{if(!n[e].regex)return`(${r.escapeRegExp(e)})`;let t=n[e].regex.pattern||e;return`(${r.escapeRegExpGroups(t)})`}).join("|")),s=new RegExp(s,"gi"),t&&(s=new RegExp(s,"g"))}function v(){g&&clearTimeout(g),g=setTimeout(d,0)}m(h),e.subscriptions.push(o.commands.registerCommand("todohighlight.toggleHighlight",(function(){h.update("isEnable",!h.get("isEnable"),!0).then((function(){v()}))}))),e.subscriptions.push(o.commands.registerCommand("todohighlight.listAnnotations",(function(){if(l.trim())r.searchAnnotations(p,s,r.annotationsFound);else{if(!n)return;var e=Object.keys(n);e.unshift("ALL"),r.chooseAnnotationType(e).then((function(e){if(e){var n=s;"ALL"!=e&&(e=r.escapeRegExp(e),n=new RegExp(e,t?"g":"gi")),r.searchAnnotations(p,n,r.annotationsFound)}}))}}))),e.subscriptions.push(o.commands.registerCommand("todohighlight.showOutputChannel",(function(){var e=p.get("annotationList",[]);r.showOutputChannel(e)}))),f&&v(),i.onDidChangeActiveTextEditor((function(e){f=e,e&&v()}),null,e.subscriptions),a.onDidChangeTextDocument((function(e){f&&e.document===f.document&&v()}),null,e.subscriptions),a.onDidChangeConfiguration((function(){(h=a.getConfiguration("todohighlight")).get("isEnable")&&(m(h),v())}),null,e.subscriptions)}},function(e,t,n){var o=n(0),r=n(3),i=o.window,a=o.workspace,u={"TODO:":{text:"TODO:",color:"#fff",backgroundColor:"#ffbd2a",overviewRulerColor:"rgba(255,189,42,0.8)"},"FIXME:":{text:"FIXME:",color:"#fff",backgroundColor:"#f06292",overviewRulerColor:"rgba(240,98,146,0.8)"}},s={color:"#2196f3",backgroundColor:"#ffeb3b"};function c(e){return Array.isArray(e)?"{"+e.join(",")+"}":"string"==typeof e?e:""}function l(e,t,n,o){for(var r=e.uri.toString(),i=r.substring(7,r.length),a=0;a<e.lineCount;a++){var u=e.lineAt(a).text,s=u.match(o);if(null!==s){t.hasOwnProperty(i)||(t[i]=[]);var c=f(u,s);c.length>500&&(c=c.substring(0,500).trim()+"...");var l=p(r,i,u,a,s),g={uri:l.uri,label:c,detail:l.relativePath,lineNum:a,fileName:l.absPath,startCol:l.startCol,endCol:l.endCol};n.push(g),t[i].push(g)}}}function g(e){if(i.outputChannel)if(i.outputChannel.clear(),0!==e.length){var t=a.getConfiguration("todohighlight").get("toggleURI",!1),n=r.platform();e.forEach((function(e,o){var r=["#"+(o+1)+"\t"+e.uri+"#"+(e.lineNum+1),"#"+(o+1)+"\t"+e.uri+":"+(e.lineNum+1)+":"+(e.startCol+1)],a=0;"linux"!=n&&"darwin"!=n||(a=1),t&&(a=+!a),i.outputChannel.appendLine(r[a]),i.outputChannel.appendLine("\t"+e.label+"\n")})),i.outputChannel.show()}else i.showInformationMessage("No results")}function f(e,t){return e.substring(e.indexOf(t[0]),e.length)}function p(e,t,n,o,r){var i=a.rootPath+"/",u=t.replace(i,""),s=n.indexOf(r[0]);return{uri:e,absPath:t,relativePath:u+" "+(o+1)+":"+(s+1),startCol:s,endCol:n.length}}function h(e){i.processing=!0,d("$(checklist)","0"),console.log("todohighlight err:",e)}function d(e,t,n){i.statusBarItem&&(i.statusBarItem.text=`${e} ${t}`||"",n&&(i.statusBarItem.tooltip=n),i.statusBarItem.show())}function m(e){return e.replace(/\(\?<[=|!][^)]*\)/g,"").replace(/((?:[^\\]{1}|^)(?:(?:[\\]{2})+)?)(\((?!\?[:|=|!]))([^)]*)(\))/g,"$1$2?:$3$4")}e.exports={DEFAULT_STYLE:s,getAssembledData:function(e,t,n){var o,r={},i=[];return e.forEach(e=>{var o=(e="string"==typeof e?{text:e}:e).text;o&&(n||(o=o.toUpperCase()),"TODO:"!=o&&"FIXME:"!=o||(e=Object.assign({},u[o],e)),r[o]=Object.assign({},s,t,e),e.regex&&i.push(i.pattern||o))}),i&&(o=i.join("|")),Object.keys(u).filter(e=>!o||!e.match(new RegExp(o))).forEach(e=>{r[e]||(r[e]=Object.assign({},s,t,u[e]))}),r},chooseAnnotationType:function(e){return i.showQuickPick(e,{})},searchAnnotations:function(e,t,n){var o=a.getConfiguration("todohighlight"),r=c(o.get("include"))||"{**/*}",u=c(o.get("exclude")),s=o.get("maxFilesForSearch",5120);i.processing=!0,d("$(zap)"," Searching..."),a.findFiles(r,u,s).then((function(o){if(o&&0!==o.length)for(var r=o.length,u=0,s={},c=[],g=0;g<r;g++)a.openTextDocument(o[g]).then((function(e){l(e,s,c,t),f()}),(function(e){h(e),f()}));else n({message:"No files found"});function f(){u++,d("$(zap)",Math.floor(u/r*100)+"%  Searching..."),(u===r||i.manullyCancel)&&(i.processing=!0,e.update("annotationList",c),n(null,s,c))}}),(function(e){h(e)}))},annotationsFound:function(e,t,n){if(e)return console.log("todohighlight err:",e),void d("$(checklist)","0");var o=n.length;d("$(checklist)",o,o+" result(s) found"),g(n)},createStatusBarItem:function(){var e=i.createStatusBarItem(o.StatusBarAlignment.Left);return e.text="$(checklist)0",e.tooltip="List annotations",e.command="todohighlight.showOutputChannel",e},setStatusMsg:d,showOutputChannel:g,escapeRegExp:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},escapeRegExpGroups:function(e){if(parseFloat(process.version.replace("v",""))>9){let t=/(?<!\\)(\()([^?]\w*(?:\\+\w)*)(\))?/g;return e.replace(t,"$1?:$2$3")}return m(e)},escapeRegExpGroupsLegacy:m}},function(e,t){e.exports=require("os")}]);
//# sourceMappingURL=extension.js.map